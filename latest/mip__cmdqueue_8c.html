<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIP SDK: src/mip/mip_cmdqueue.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIP SDK
   &#160;<span id="projectnumber">v1.0.0-5-g3329bf5</span>
   </div>
   <div id="projectbrief">MicroStrain Communications Library for embedded systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0652f4f834e91e7f754984a58c1d13cb.html">mip</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mip_cmdqueue.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mip__cmdqueue_8h_source.html">mip_cmdqueue.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mip__field_8h_source.html">mip_field.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mip__packet_8h_source.html">mip_packet.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mip_cmdqueue.c:</div>
<div class="dyncontent">
<div class="center"><img src="mip__cmdqueue_8c__incl.png" border="0" usemap="#asrc_2mip_2mip__cmdqueue_8c" alt=""/></div>
<map name="asrc_2mip_2mip__cmdqueue_8c" id="asrc_2mip_2mip__cmdqueue_8c">
<area shape="rect" title=" " alt="" coords="156,5,324,32"/>
<area shape="rect" href="mip__cmdqueue_8h.html" title=" " alt="" coords="179,80,301,107"/>
<area shape="rect" href="mip__packet_8h.html" title=" " alt="" coords="94,155,194,181"/>
<area shape="rect" href="mip__field_8h.html" title=" " alt="" coords="18,80,102,107"/>
<area shape="rect" title=" " alt="" coords="325,80,390,107"/>
<area shape="rect" title=" " alt="" coords="415,80,484,107"/>
<area shape="rect" title=" " alt="" coords="203,304,269,331"/>
<area shape="rect" href="mip__types_8h.html" title=" " alt="" coords="35,229,128,256"/>
<area shape="rect" href="mip__result_8h.html" title=" " alt="" coords="152,229,245,256"/>
<area shape="rect" title=" " alt="" coords="105,304,173,331"/>
<area shape="rect" title=" " alt="" coords="5,304,80,331"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab14b27223b7dd70a8cd246074b704cf0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#ab14b27223b7dd70a8cd246074b704cf0">MIP_REPLY_DESC_GLOBAL_ACK_NACK</a>&#160;&#160;&#160;0xF1</td></tr>
<tr class="separator:ab14b27223b7dd70a8cd246074b704cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a721d2321a5fd9f0629b67bbb0ce7ee02"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a721d2321a5fd9f0629b67bbb0ce7ee02">MIP_INDEX_REPLY_DESCRIPTOR</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a721d2321a5fd9f0629b67bbb0ce7ee02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6917ad0741e1c576c011be0ffdd2a713"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a6917ad0741e1c576c011be0ffdd2a713">MIP_INDEX_REPLY_ACK_CODE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a6917ad0741e1c576c011be0ffdd2a713"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae62c96dbceab90067a16d844ac97b192"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#ae62c96dbceab90067a16d844ac97b192">mip_pending_cmd_init</a> (mip_pending_cmd *cmd, uint8_t descriptor_set, uint8_t field_descriptor)</td></tr>
<tr class="memdesc:ae62c96dbceab90067a16d844ac97b192"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a pending command with no reponse data or additional time.  <a href="mip__cmdqueue_8c.html#ae62c96dbceab90067a16d844ac97b192">More...</a><br /></td></tr>
<tr class="separator:ae62c96dbceab90067a16d844ac97b192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5afaefa6d67ce9387a0c69a4620262cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a5afaefa6d67ce9387a0c69a4620262cd">mip_pending_cmd_init_with_timeout</a> (mip_pending_cmd *cmd, uint8_t descriptor_set, uint8_t field_descriptor, timeout_type additional_time)</td></tr>
<tr class="memdesc:a5afaefa6d67ce9387a0c69a4620262cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a pending mip commmand with extra timeout time.  <a href="mip__cmdqueue_8c.html#a5afaefa6d67ce9387a0c69a4620262cd">More...</a><br /></td></tr>
<tr class="separator:a5afaefa6d67ce9387a0c69a4620262cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c655111d5bd8d7be78c3cb46317532"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a44c655111d5bd8d7be78c3cb46317532">mip_pending_cmd_init_with_response</a> (mip_pending_cmd *cmd, uint8_t descriptor_set, uint8_t field_descriptor, uint8_t response_descriptor, uint8_t *response_buffer, uint8_t response_buffer_size)</td></tr>
<tr class="memdesc:a44c655111d5bd8d7be78c3cb46317532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a pending mip commmand with expected response data.  <a href="mip__cmdqueue_8c.html#a44c655111d5bd8d7be78c3cb46317532">More...</a><br /></td></tr>
<tr class="separator:a44c655111d5bd8d7be78c3cb46317532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae460868df0ef4a0379ed68aa2e2ca844"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#ae460868df0ef4a0379ed68aa2e2ca844">mip_pending_cmd_init_full</a> (mip_pending_cmd *cmd, uint8_t descriptor_set, uint8_t field_descriptor, uint8_t response_descriptor, uint8_t *response_buffer, uint8_t response_buffer_size, timeout_type additional_time)</td></tr>
<tr class="memdesc:ae460868df0ef4a0379ed68aa2e2ca844"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a pending mip commmand with all parameters.  <a href="mip__cmdqueue_8c.html#ae460868df0ef4a0379ed68aa2e2ca844">More...</a><br /></td></tr>
<tr class="separator:ae460868df0ef4a0379ed68aa2e2ca844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b1be6fa39c9ae116c14a713c08e767"><td class="memItemLeft" align="right" valign="top">enum mip_cmd_result&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#ab7b1be6fa39c9ae116c14a713c08e767">mip_pending_cmd_status</a> (const mip_pending_cmd *cmd)</td></tr>
<tr class="memdesc:ab7b1be6fa39c9ae116c14a713c08e767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the status of the pending command.  <a href="mip__cmdqueue_8c.html#ab7b1be6fa39c9ae116c14a713c08e767">More...</a><br /></td></tr>
<tr class="separator:ab7b1be6fa39c9ae116c14a713c08e767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fa69f108fce070f34358d98f04df8f5"><td class="memItemLeft" align="right" valign="top">const uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a6fa69f108fce070f34358d98f04df8f5">mip_pending_cmd_response</a> (const mip_pending_cmd *cmd)</td></tr>
<tr class="memdesc:a6fa69f108fce070f34358d98f04df8f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the response payload pointer.  <a href="mip__cmdqueue_8c.html#a6fa69f108fce070f34358d98f04df8f5">More...</a><br /></td></tr>
<tr class="separator:a6fa69f108fce070f34358d98f04df8f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf8d966ede3ebcbbc45eca4ddfb57f6"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#adaf8d966ede3ebcbbc45eca4ddfb57f6">mip_pending_cmd_response_length</a> (const mip_pending_cmd *cmd)</td></tr>
<tr class="memdesc:adaf8d966ede3ebcbbc45eca4ddfb57f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the length of the response data.  <a href="mip__cmdqueue_8c.html#adaf8d966ede3ebcbbc45eca4ddfb57f6">More...</a><br /></td></tr>
<tr class="separator:adaf8d966ede3ebcbbc45eca4ddfb57f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b104ec5cbbdf5fdd344d613b25afa3a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a9b104ec5cbbdf5fdd344d613b25afa3a">mip_pending_cmd_check_timeout</a> (const mip_pending_cmd *cmd, timestamp_type now)</td></tr>
<tr class="memdesc:a9b104ec5cbbdf5fdd344d613b25afa3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the command should time out.  <a href="mip__cmdqueue_8c.html#a9b104ec5cbbdf5fdd344d613b25afa3a">More...</a><br /></td></tr>
<tr class="separator:a9b104ec5cbbdf5fdd344d613b25afa3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18aa09db516da1a05341637731c12385"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a18aa09db516da1a05341637731c12385">mip_cmd_queue_init</a> (mip_cmd_queue *queue, timeout_type base_reply_timeout)</td></tr>
<tr class="memdesc:a18aa09db516da1a05341637731c12385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a command queue.  <a href="mip__cmdqueue_8c.html#a18aa09db516da1a05341637731c12385">More...</a><br /></td></tr>
<tr class="separator:a18aa09db516da1a05341637731c12385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd500de1b3d23a5ebe494b324582a144"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#abd500de1b3d23a5ebe494b324582a144">mip_cmd_queue_enqueue</a> (mip_cmd_queue *queue, mip_pending_cmd *cmd)</td></tr>
<tr class="memdesc:abd500de1b3d23a5ebe494b324582a144"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a command to wait for replies.  <a href="mip__cmdqueue_8c.html#abd500de1b3d23a5ebe494b324582a144">More...</a><br /></td></tr>
<tr class="separator:abd500de1b3d23a5ebe494b324582a144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c4ca9dbe8137842e4b79676c8e09dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#ad0c4ca9dbe8137842e4b79676c8e09dc">mip_cmd_queue_dequeue</a> (mip_cmd_queue *queue, mip_pending_cmd *cmd)</td></tr>
<tr class="memdesc:ad0c4ca9dbe8137842e4b79676c8e09dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a pending command from the queue.  <a href="mip__cmdqueue_8c.html#ad0c4ca9dbe8137842e4b79676c8e09dc">More...</a><br /></td></tr>
<tr class="separator:ad0c4ca9dbe8137842e4b79676c8e09dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a2e8ef35c5e87c8d7520e79d9c79f46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a9a2e8ef35c5e87c8d7520e79d9c79f46">mip_cmd_queue_process_packet</a> (mip_cmd_queue *queue, const mip_packet *packet, timestamp_type timestamp)</td></tr>
<tr class="memdesc:a9a2e8ef35c5e87c8d7520e79d9c79f46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process an incoming packet and check for replies to pending commands.  <a href="mip__cmdqueue_8c.html#a9a2e8ef35c5e87c8d7520e79d9c79f46">More...</a><br /></td></tr>
<tr class="separator:a9a2e8ef35c5e87c8d7520e79d9c79f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90fbf06e3fb9812e07e141c86dd1a43f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#a90fbf06e3fb9812e07e141c86dd1a43f">mip_cmd_queue_clear</a> (mip_cmd_queue *queue)</td></tr>
<tr class="memdesc:a90fbf06e3fb9812e07e141c86dd1a43f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the command queue.  <a href="mip__cmdqueue_8c.html#a90fbf06e3fb9812e07e141c86dd1a43f">More...</a><br /></td></tr>
<tr class="separator:a90fbf06e3fb9812e07e141c86dd1a43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab358abcfb5660e59f76317f48d8bf00f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#ab358abcfb5660e59f76317f48d8bf00f">mip_cmd_queue_update</a> (mip_cmd_queue *queue, timestamp_type now)</td></tr>
<tr class="memdesc:ab358abcfb5660e59f76317f48d8bf00f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call periodically to make sure commands time out if no packets are received.  <a href="mip__cmdqueue_8c.html#ab358abcfb5660e59f76317f48d8bf00f">More...</a><br /></td></tr>
<tr class="separator:ab358abcfb5660e59f76317f48d8bf00f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7fd2da04ffa4e7f87a478f50a70363e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#ae7fd2da04ffa4e7f87a478f50a70363e">mip_cmd_queue_set_base_reply_timeout</a> (mip_cmd_queue *queue, timeout_type timeout)</td></tr>
<tr class="memdesc:ae7fd2da04ffa4e7f87a478f50a70363e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the base reply timeout for all commands.  <a href="mip__cmdqueue_8c.html#ae7fd2da04ffa4e7f87a478f50a70363e">More...</a><br /></td></tr>
<tr class="separator:ae7fd2da04ffa4e7f87a478f50a70363e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f3b76ae28f778134846aa606691474"><td class="memItemLeft" align="right" valign="top">timeout_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__cmdqueue_8c.html#aa4f3b76ae28f778134846aa606691474">mip_cmd_queue_base_reply_timeout</a> (const mip_cmd_queue *queue)</td></tr>
<tr class="memdesc:aa4f3b76ae28f778134846aa606691474"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the base reply timeout for all commands.  <a href="mip__cmdqueue_8c.html#aa4f3b76ae28f778134846aa606691474">More...</a><br /></td></tr>
<tr class="separator:aa4f3b76ae28f778134846aa606691474"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6917ad0741e1c576c011be0ffdd2a713"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6917ad0741e1c576c011be0ffdd2a713">&#9670;&nbsp;</a></span>MIP_INDEX_REPLY_ACK_CODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIP_INDEX_REPLY_ACK_CODE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a721d2321a5fd9f0629b67bbb0ce7ee02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a721d2321a5fd9f0629b67bbb0ce7ee02">&#9670;&nbsp;</a></span>MIP_INDEX_REPLY_DESCRIPTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIP_INDEX_REPLY_DESCRIPTOR&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab14b27223b7dd70a8cd246074b704cf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14b27223b7dd70a8cd246074b704cf0">&#9670;&nbsp;</a></span>MIP_REPLY_DESC_GLOBAL_ACK_NACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIP_REPLY_DESC_GLOBAL_ACK_NACK&#160;&#160;&#160;0xF1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa4f3b76ae28f778134846aa606691474"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f3b76ae28f778134846aa606691474">&#9670;&nbsp;</a></span>mip_cmd_queue_base_reply_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">timeout_type mip_cmd_queue_base_reply_timeout </td>
          <td>(</td>
          <td class="paramtype">const mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the base reply timeout for all commands. </p>
<dl class="section return"><dt>Returns</dt><dd>The minimum time to wait for a reply to any command. </dd></dl>

</div>
</div>
<a id="a90fbf06e3fb9812e07e141c86dd1a43f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90fbf06e3fb9812e07e141c86dd1a43f">&#9670;&nbsp;</a></span>mip_cmd_queue_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_cmd_queue_clear </td>
          <td>(</td>
          <td class="paramtype">mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the command queue. </p>
<p>This must be called from the same thread context as the update function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad0c4ca9dbe8137842e4b79676c8e09dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0c4ca9dbe8137842e4b79676c8e09dc">&#9670;&nbsp;</a></span>mip_cmd_queue_dequeue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_cmd_queue_dequeue </td>
          <td>(</td>
          <td class="paramtype">mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a pending command from the queue. </p>

</div>
</div>
<a id="abd500de1b3d23a5ebe494b324582a144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd500de1b3d23a5ebe494b324582a144">&#9670;&nbsp;</a></span>mip_cmd_queue_enqueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_cmd_queue_enqueue </td>
          <td>(</td>
          <td class="paramtype">mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a command to wait for replies. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td></td></tr>
    <tr><td class="paramname">cmd</td><td>Listens for replies to this command.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>The command must not be deallocated or go out of scope while the mip_cmd_status_is_finished returns false. </dd></dl>

</div>
</div>
<a id="a18aa09db516da1a05341637731c12385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18aa09db516da1a05341637731c12385">&#9670;&nbsp;</a></span>mip_cmd_queue_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_cmd_queue_init </td>
          <td>(</td>
          <td class="paramtype">mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timeout_type&#160;</td>
          <td class="paramname"><em>base_reply_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a command queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td></td></tr>
    <tr><td class="paramname">base_reply_timeout</td><td>The minimum timeout given to all MIP commands. Additional time may be given to specific commands which take longer. This is intended to be used to accommodate long communication latencies, such as when using a TCP connection. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9a2e8ef35c5e87c8d7520e79d9c79f46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a2e8ef35c5e87c8d7520e79d9c79f46">&#9670;&nbsp;</a></span>mip_cmd_queue_process_packet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_cmd_queue_process_packet </td>
          <td>(</td>
          <td class="paramtype">mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const mip_packet *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process an incoming packet and check for replies to pending commands. </p>
<p>Call this from the Mip_parser callback, passing the arguments directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td></td></tr>
    <tr><td class="paramname">packet</td><td>The received MIP packet. Assumed to be valid. </td></tr>
    <tr><td class="paramname">timestamp</td><td>The time the packet was received </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae7fd2da04ffa4e7f87a478f50a70363e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7fd2da04ffa4e7f87a478f50a70363e">&#9670;&nbsp;</a></span>mip_cmd_queue_set_base_reply_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_cmd_queue_set_base_reply_timeout </td>
          <td>(</td>
          <td class="paramtype">mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timeout_type&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the base reply timeout for all commands. </p>
<p>THe base reply timeout is the minimum time to wait for a reply.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td></td></tr>
    <tr><td class="paramname">timeout</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab358abcfb5660e59f76317f48d8bf00f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab358abcfb5660e59f76317f48d8bf00f">&#9670;&nbsp;</a></span>mip_cmd_queue_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_cmd_queue_update </td>
          <td>(</td>
          <td class="paramtype">mip_cmd_queue *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call periodically to make sure commands time out if no packets are received. </p>
<p>Call this during the device update if no calls to mip_cmd_queue_process_packet are made (e.g. because no packets were received). It is safe to call this in either case.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td></td></tr>
    <tr><td class="paramname">now</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9b104ec5cbbdf5fdd344d613b25afa3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b104ec5cbbdf5fdd344d613b25afa3a">&#9670;&nbsp;</a></span>mip_pending_cmd_check_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mip_pending_cmd_check_timeout </td>
          <td>(</td>
          <td class="paramtype">const mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the command should time out. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">now</td><td>Current time</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the command should time out. Only possible for MIP_STATUS_WAITING. </dd>
<dd>
false if the command should not time out. </dd></dl>

</div>
</div>
<a id="ae62c96dbceab90067a16d844ac97b192"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62c96dbceab90067a16d844ac97b192">&#9670;&nbsp;</a></span>mip_pending_cmd_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_pending_cmd_init </td>
          <td>(</td>
          <td class="paramtype">mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>descriptor_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>field_descriptor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a pending command with no reponse data or additional time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">descriptor_set</td><td>Command descriptor set. </td></tr>
    <tr><td class="paramname">field_descriptor</td><td>Command field descriptor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae460868df0ef4a0379ed68aa2e2ca844"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae460868df0ef4a0379ed68aa2e2ca844">&#9670;&nbsp;</a></span>mip_pending_cmd_init_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_pending_cmd_init_full </td>
          <td>(</td>
          <td class="paramtype">mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>descriptor_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>field_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>response_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>response_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>response_buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timeout_type&#160;</td>
          <td class="paramname"><em>additional_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a pending mip commmand with all parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">descriptor_set</td><td>Command descriptor set. </td></tr>
    <tr><td class="paramname">field_descriptor</td><td>Command field descriptor. </td></tr>
    <tr><td class="paramname">response_descriptor</td><td>Optional response data descriptor. Use 0x00 if no data is expected. </td></tr>
    <tr><td class="paramname">response_buffer</td><td>Optional buffer to hold response data, if any. If NULL, response_buffer_size must be 0. </td></tr>
    <tr><td class="paramname">response_buffer_size</td><td>Size of the response buffer. The response will be limited to this size. </td></tr>
    <tr><td class="paramname">additional_time</td><td>Additional time on top of the base reply timeout for this specific command. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a44c655111d5bd8d7be78c3cb46317532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44c655111d5bd8d7be78c3cb46317532">&#9670;&nbsp;</a></span>mip_pending_cmd_init_with_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_pending_cmd_init_with_response </td>
          <td>(</td>
          <td class="paramtype">mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>descriptor_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>field_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>response_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>response_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>response_buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a pending mip commmand with expected response data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">descriptor_set</td><td>Command descriptor set. </td></tr>
    <tr><td class="paramname">field_descriptor</td><td>Command field descriptor. </td></tr>
    <tr><td class="paramname">response_descriptor</td><td>Optional response data descriptor. Use 0x00 if no data is expected. </td></tr>
    <tr><td class="paramname">response_buffer</td><td>Optional buffer to hold response data, if any. If NULL, response_buffer_size must be 0. </td></tr>
    <tr><td class="paramname">response_buffer_size</td><td>Optional buffer to hold response data, if any. If NULL, response_buffer_size must be 0. </td></tr>
    <tr><td class="paramname">response_buffer_size</td><td>Size of the response buffer. The response will be limited to this size. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5afaefa6d67ce9387a0c69a4620262cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5afaefa6d67ce9387a0c69a4620262cd">&#9670;&nbsp;</a></span>mip_pending_cmd_init_with_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_pending_cmd_init_with_timeout </td>
          <td>(</td>
          <td class="paramtype">mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>descriptor_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>field_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timeout_type&#160;</td>
          <td class="paramname"><em>additional_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a pending mip commmand with extra timeout time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">descriptor_set</td><td>Command descriptor set. </td></tr>
    <tr><td class="paramname">field_descriptor</td><td>Command field descriptor. </td></tr>
    <tr><td class="paramname">additional_time</td><td>Additional time on top of the base reply timeout for this specific command. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6fa69f108fce070f34358d98f04df8f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fa69f108fce070f34358d98f04df8f5">&#9670;&nbsp;</a></span>mip_pending_cmd_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t* mip_pending_cmd_response </td>
          <td>(</td>
          <td class="paramtype">const mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the response payload pointer. </p>
<p>This function may only be called after the command finishes with an ACK. </p>

</div>
</div>
<a id="adaf8d966ede3ebcbbc45eca4ddfb57f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaf8d966ede3ebcbbc45eca4ddfb57f6">&#9670;&nbsp;</a></span>mip_pending_cmd_response_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mip_pending_cmd_response_length </td>
          <td>(</td>
          <td class="paramtype">const mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the length of the response data. </p>
<p>This function may only be called after the command finishes. If the command completed with a NACK, or if it timed out, the response length will be zero. </p>

</div>
</div>
<a id="ab7b1be6fa39c9ae116c14a713c08e767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b1be6fa39c9ae116c14a713c08e767">&#9670;&nbsp;</a></span>mip_pending_cmd_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum mip_cmd_result mip_pending_cmd_status </td>
          <td>(</td>
          <td class="paramtype">const mip_pending_cmd *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the status of the pending command. </p>
<dl class="section see"><dt>See also</dt><dd>mip_cmd_status </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
