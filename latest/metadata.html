<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIP_SDK: Metadata</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MIP_SDK<span id="projectnumber">&#160;v2.0.0-140-gef6326c</span>
   </div>
   <div id="projectbrief">MicroStrain Communications Library for embedded systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Metadata</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The MIP SDK includes an additional set of definitions for each MIP field which contain additional information beyond that needed for the core functionality of sending commands and receiving data. It includes human-readable field names and information on each parameter, such as name, type, size, etc. This information is accessible at compile time and can be used for things like pretty-printing, CSV generation, and more.</p>
<p>Metadata is currently an experimental feature and is subject to changes. It requires C++17 or later.</p>
<p>Usage:</p><ol type="1">
<li>Include the metadata definition header for the corresponding descriptor set.</li>
<li>Get a reference or pointer to the metadata for your field.</li>
<li>Access members of the reference.</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> FieldType&gt;</div>
<div class="line"><span class="keywordtype">void</span> print_parameters()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Obtain a reference for easier access.</span></div>
<div class="line">    <span class="keyword">constexpr</span> <span class="keyword">const</span> <a class="code hl_struct" href="structmip_1_1metadata_1_1_field_info.html">mip::metadata::FieldInfo</a>&amp; field = <a class="code hl_struct" href="structmip_1_1metadata_1_1_metadata_for.html">mip::metadata::MetadataFor&lt;FieldType&gt;::value</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Print field name and descriptor.</span></div>
<div class="line">    std::printf(<span class="stringliteral">&quot;Field (0x%02X,%02X) %s:\n&quot;</span>, field.<a class="code hl_variable" href="structmip_1_1metadata_1_1_field_info.html#abe0ac99ce778b2f7ff386cfa37e17cae">descriptor</a>.<a class="code hl_variable" href="structmip_1_1_composite_descriptor.html#a255a1c913d8066e96833521a9b0c7975">descriptorSet</a>, field.<a class="code hl_variable" href="structmip_1_1metadata_1_1_field_info.html#abe0ac99ce778b2f7ff386cfa37e17cae">descriptor</a>.<a class="code hl_variable" href="structmip_1_1_composite_descriptor.html#a0d1a4a6058b2781e05bbcdfb080508ce">fieldDescriptor</a>, field.<a class="code hl_variable" href="structmip_1_1metadata_1_1_struct_info.html#aaf770fdf7e7f3dc10969b8646eb1c9d1">title</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Iterate each parameter.</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0;</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_struct" href="structmip_1_1metadata_1_1_parameter_info.html">mip::metadata::ParameterInfo</a>&amp; param : field.parameters)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Single element (most parameters)?</span></div>
<div class="line">        <span class="keywordflow">if</span>(param.count.count == 1)</div>
<div class="line">            std::printf(<span class="stringliteral">&quot;  Parameter %u: %s\n&quot;</span>, p, param.name);</div>
<div class="line">            </div>
<div class="line">        <span class="comment">// Fixed-size array?</span></div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param.count.isFixed())</div>
<div class="line">            std::printf(<span class="stringliteral">&quot;  Parameter %u: %s[%u]\n&quot;</span>, p, param.name, param.count.count);</div>
<div class="line">            </div>
<div class="line">        <span class="comment">// Variable-sized array with another parameter holding the count?</span></div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param.count.hasCounter())</div>
<div class="line">            std::printf(<span class="stringliteral">&quot;  Parameter %u: %s[%s]\n&quot;</span>, p, param.name, field.<a class="code hl_variable" href="structmip_1_1metadata_1_1_struct_info.html#addeb11aa38bc4b485115aea38640a7d1">parameters</a>[param.count.counter.index()].name);</div>
<div class="line">            </div>
<div class="line">        <span class="comment">// Variable-length array which is determined by the payload length.</span></div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            std::printf(<span class="stringliteral">&quot;  Parameter %u: %s[]\n&quot;</span>, p, param.name);</div>
<div class="line"> </div>
<div class="line">        p++;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    std::printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="metadata_2definitions_2commands__3dm_8hpp.html">mip/metadata/definitions/commands_3dm.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="metadata_2definitions_2data__sensor_8hpp.html">mip/metadata/definitions/data_sensor.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    print_parameters&lt;mip::commands_3dm::MessageFormat&gt;();</div>
<div class="line">    print_parameters&lt;mip::commands_3dm::PpsSource&gt;();</div>
<div class="line">    print_parameters&lt;mip::data_sensor::ScaledAccel&gt;();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="ametadata_2definitions_2commands__3dm_8hpp_html"><div class="ttname"><a href="metadata_2definitions_2commands__3dm_8hpp.html">commands_3dm.hpp</a></div></div>
<div class="ttc" id="ametadata_2definitions_2data__sensor_8hpp_html"><div class="ttname"><a href="metadata_2definitions_2data__sensor_8hpp.html">data_sensor.hpp</a></div></div>
<div class="ttc" id="astructmip_1_1_composite_descriptor_html_a0d1a4a6058b2781e05bbcdfb080508ce"><div class="ttname"><a href="structmip_1_1_composite_descriptor.html#a0d1a4a6058b2781e05bbcdfb080508ce">mip::CompositeDescriptor::fieldDescriptor</a></div><div class="ttdeci">uint8_t fieldDescriptor</div><div class="ttdoc">MIP field descriptor.</div><div class="ttdef"><b>Definition</b> mip_descriptors.hpp:25</div></div>
<div class="ttc" id="astructmip_1_1_composite_descriptor_html_a255a1c913d8066e96833521a9b0c7975"><div class="ttname"><a href="structmip_1_1_composite_descriptor.html#a255a1c913d8066e96833521a9b0c7975">mip::CompositeDescriptor::descriptorSet</a></div><div class="ttdeci">uint8_t descriptorSet</div><div class="ttdoc">MIP descriptor set.</div><div class="ttdef"><b>Definition</b> mip_descriptors.hpp:24</div></div>
<div class="ttc" id="astructmip_1_1metadata_1_1_field_info_html"><div class="ttname"><a href="structmip_1_1metadata_1_1_field_info.html">mip::metadata::FieldInfo</a></div><div class="ttdef"><b>Definition</b> mip_structures.hpp:183</div></div>
<div class="ttc" id="astructmip_1_1metadata_1_1_field_info_html_abe0ac99ce778b2f7ff386cfa37e17cae"><div class="ttname"><a href="structmip_1_1metadata_1_1_field_info.html#abe0ac99ce778b2f7ff386cfa37e17cae">mip::metadata::FieldInfo::descriptor</a></div><div class="ttdeci">CompositeDescriptor descriptor</div><div class="ttdef"><b>Definition</b> mip_structures.hpp:184</div></div>
<div class="ttc" id="astructmip_1_1metadata_1_1_metadata_for_html"><div class="ttname"><a href="structmip_1_1metadata_1_1_metadata_for.html">mip::metadata::MetadataFor</a></div><div class="ttdef"><b>Definition</b> mip_metadata.hpp:15</div></div>
<div class="ttc" id="astructmip_1_1metadata_1_1_parameter_info_html"><div class="ttname"><a href="structmip_1_1metadata_1_1_parameter_info.html">mip::metadata::ParameterInfo</a></div><div class="ttdef"><b>Definition</b> mip_structures.hpp:128</div></div>
<div class="ttc" id="astructmip_1_1metadata_1_1_struct_info_html_aaf770fdf7e7f3dc10969b8646eb1c9d1"><div class="ttname"><a href="structmip_1_1metadata_1_1_struct_info.html#aaf770fdf7e7f3dc10969b8646eb1c9d1">mip::metadata::StructInfo::title</a></div><div class="ttdeci">const char * title</div><div class="ttdef"><b>Definition</b> mip_structures.hpp:174</div></div>
<div class="ttc" id="astructmip_1_1metadata_1_1_struct_info_html_addeb11aa38bc4b485115aea38640a7d1"><div class="ttname"><a href="structmip_1_1metadata_1_1_struct_info.html#addeb11aa38bc4b485115aea38640a7d1">mip::metadata::StructInfo::parameters</a></div><div class="ttdeci">Span&lt; const ParameterInfo &gt; parameters</div><div class="ttdef"><b>Definition</b> mip_structures.hpp:177</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
