<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIP SDK: src/mip/mip_parser.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIP SDK
   &#160;<span id="projectnumber">v1.0.0-47-g8f90815</span>
   </div>
   <div id="projectbrief">MicroStrain Communications Library for embedded systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0652f4f834e91e7f754984a58c1d13cb.html">mip</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mip_parser.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="mip__parser_8h_source.html">mip_parser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mip__offsets_8h_source.html">mip_offsets.h</a>&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mip_parser.c:</div>
<div class="dyncontent">
<div class="center"><img src="mip__parser_8c__incl.png" border="0" usemap="#asrc_2mip_2mip__parser_8c" alt=""/></div>
<map name="asrc_2mip_2mip__parser_8c" id="asrc_2mip_2mip__parser_8c">
<area shape="rect" title=" " alt="" coords="244,5,388,32"/>
<area shape="rect" href="mip__parser_8h.html" title=" " alt="" coords="181,80,278,107"/>
<area shape="rect" href="mip__offsets_8h.html" title=" " alt="" coords="267,155,365,181"/>
<area shape="rect" title=" " alt="" coords="353,80,423,107"/>
<area shape="rect" href="mip__packet_8h.html" title=" " alt="" coords="41,155,141,181"/>
<area shape="rect" href="mip__types_8h.html" title=" " alt="" coords="55,229,148,256"/>
<area shape="rect" href="byte__ring_8h.html" title=" " alt="" coords="172,229,287,256"/>
<area shape="rect" title=" " alt="" coords="197,304,262,331"/>
<area shape="rect" title=" " alt="" coords="105,304,173,331"/>
<area shape="rect" title=" " alt="" coords="5,304,80,331"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af46fa1e7ad76d756ded89ad76abc6ed9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#af46fa1e7ad76d756ded89ad76abc6ed9">MIPPARSER_RESET_LENGTH</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:af46fa1e7ad76d756ded89ad76abc6ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4c335da8f229f06e03af5ff86bba7aa5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a4c335da8f229f06e03af5ff86bba7aa5">mip_parser_init</a> (mip_parser *parser, uint8_t *buffer, size_t buffer_size, mip_packet_callback callback, void *callback_object, timestamp_type timeout)</td></tr>
<tr class="memdesc:a4c335da8f229f06e03af5ff86bba7aa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the MIP parser.  <a href="mip__parser_8c.html#a4c335da8f229f06e03af5ff86bba7aa5">More...</a><br /></td></tr>
<tr class="separator:a4c335da8f229f06e03af5ff86bba7aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398ae890cc4eac40dfcd389cbb2c2390"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a398ae890cc4eac40dfcd389cbb2c2390">mip_parser_reset</a> (mip_parser *parser)</td></tr>
<tr class="memdesc:a398ae890cc4eac40dfcd389cbb2c2390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the MIP parser.  <a href="mip__parser_8c.html#a398ae890cc4eac40dfcd389cbb2c2390">More...</a><br /></td></tr>
<tr class="separator:a398ae890cc4eac40dfcd389cbb2c2390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40b1a30bddaa52c4814c0a5fd3a6ed07"><td class="memItemLeft" align="right" valign="top">remaining_count&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a40b1a30bddaa52c4814c0a5fd3a6ed07">mip_parser_parse</a> (mip_parser *parser, const uint8_t *input_buffer, size_t input_count, timestamp_type timestamp, unsigned int max_packets)</td></tr>
<tr class="memdesc:a40b1a30bddaa52c4814c0a5fd3a6ed07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses packets from the input data buffer.  <a href="mip__parser_8c.html#a40b1a30bddaa52c4814c0a5fd3a6ed07">More...</a><br /></td></tr>
<tr class="separator:a40b1a30bddaa52c4814c0a5fd3a6ed07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fcf1f473e16d5d535a9af7837763fd8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a9fcf1f473e16d5d535a9af7837763fd8">mip_parser_parse_one_packet_from_ring</a> (mip_parser *parser, mip_packet *packet_out, timestamp_type timestamp)</td></tr>
<tr class="memdesc:a9fcf1f473e16d5d535a9af7837763fd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a single packet from the internal buffer.  <a href="mip__parser_8c.html#a9fcf1f473e16d5d535a9af7837763fd8">More...</a><br /></td></tr>
<tr class="separator:a9fcf1f473e16d5d535a9af7837763fd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ba0c15ba99eb98a3de4feaab5333023"><td class="memItemLeft" align="right" valign="top">timestamp_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a9ba0c15ba99eb98a3de4feaab5333023">mip_parser_timeout</a> (const mip_parser *parser)</td></tr>
<tr class="memdesc:a9ba0c15ba99eb98a3de4feaab5333023"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the packet timeout of the parser.  <a href="mip__parser_8c.html#a9ba0c15ba99eb98a3de4feaab5333023">More...</a><br /></td></tr>
<tr class="separator:a9ba0c15ba99eb98a3de4feaab5333023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b3177884a72049aac030789a5ecc779"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a7b3177884a72049aac030789a5ecc779">mip_parser_set_timeout</a> (mip_parser *parser, timestamp_type timeout)</td></tr>
<tr class="memdesc:a7b3177884a72049aac030789a5ecc779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the timeout of the MIP parser.  <a href="mip__parser_8c.html#a7b3177884a72049aac030789a5ecc779">More...</a><br /></td></tr>
<tr class="separator:a7b3177884a72049aac030789a5ecc779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9379c831272ba281cdd79edf395fc1d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a9379c831272ba281cdd79edf395fc1d8">mip_parser_set_callback</a> (mip_parser *parser, mip_packet_callback callback, void *callback_object)</td></tr>
<tr class="memdesc:a9379c831272ba281cdd79edf395fc1d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">mip_parser_set_callback  <a href="mip__parser_8c.html#a9379c831272ba281cdd79edf395fc1d8">More...</a><br /></td></tr>
<tr class="separator:a9379c831272ba281cdd79edf395fc1d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075cc9c325cfac3a1e4e4a34dd19b4ad"><td class="memItemLeft" align="right" valign="top">mip_packet_callback&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a075cc9c325cfac3a1e4e4a34dd19b4ad">mip_parser_callback</a> (const mip_parser *parser)</td></tr>
<tr class="memdesc:a075cc9c325cfac3a1e4e4a34dd19b4ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">mip_parser_callback  <a href="mip__parser_8c.html#a075cc9c325cfac3a1e4e4a34dd19b4ad">More...</a><br /></td></tr>
<tr class="separator:a075cc9c325cfac3a1e4e4a34dd19b4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0fe0425fea6c11567676f2153889678"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#ab0fe0425fea6c11567676f2153889678">mip_parser_callback_object</a> (const mip_parser *parser)</td></tr>
<tr class="memdesc:ab0fe0425fea6c11567676f2153889678"><td class="mdescLeft">&#160;</td><td class="mdescRight">mip_parser_callback  <a href="mip__parser_8c.html#ab0fe0425fea6c11567676f2153889678">More...</a><br /></td></tr>
<tr class="separator:ab0fe0425fea6c11567676f2153889678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cd94527b66ef53d6f949c079fecb857"><td class="memItemLeft" align="right" valign="top">timestamp_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a0cd94527b66ef53d6f949c079fecb857">mip_parser_last_packet_timestamp</a> (const mip_parser *parser)</td></tr>
<tr class="memdesc:a0cd94527b66ef53d6f949c079fecb857"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the timestamp of the last parsed packet.  <a href="mip__parser_8c.html#a0cd94527b66ef53d6f949c079fecb857">More...</a><br /></td></tr>
<tr class="separator:a0cd94527b66ef53d6f949c079fecb857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfaadcc441ffcecd290d686dff07261c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#abfaadcc441ffcecd290d686dff07261c">mip_parser_get_write_ptr</a> (mip_parser *parser, uint8_t **const ptr_out)</td></tr>
<tr class="memdesc:abfaadcc441ffcecd290d686dff07261c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain a pointer into which data may be read for processing.  <a href="mip__parser_8c.html#abfaadcc441ffcecd290d686dff07261c">More...</a><br /></td></tr>
<tr class="separator:abfaadcc441ffcecd290d686dff07261c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fad65e62d293695a8c8a182b968788c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a2fad65e62d293695a8c8a182b968788c">mip_parser_process_written</a> (mip_parser *parser, size_t count, timestamp_type timestamp, unsigned int max_packets)</td></tr>
<tr class="memdesc:a2fad65e62d293695a8c8a182b968788c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify the parser that data has been written to the pointer previously obtained via <a class="el" href="mip__parser_8c.html#abfaadcc441ffcecd290d686dff07261c" title="Obtain a pointer into which data may be read for processing.">mip_parser_get_write_ptr()</a>.  <a href="mip__parser_8c.html#a2fad65e62d293695a8c8a182b968788c">More...</a><br /></td></tr>
<tr class="separator:a2fad65e62d293695a8c8a182b968788c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3b7b6624b632eb177e5f4cbcd4e043"><td class="memItemLeft" align="right" valign="top">timeout_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mip__parser_8c.html#a2b3b7b6624b632eb177e5f4cbcd4e043">mip_timeout_from_baudrate</a> (uint32_t baudrate)</td></tr>
<tr class="memdesc:a2b3b7b6624b632eb177e5f4cbcd4e043"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes an appropriate packet timeout for a given serial baud rate.  <a href="mip__parser_8c.html#a2b3b7b6624b632eb177e5f4cbcd4e043">More...</a><br /></td></tr>
<tr class="separator:a2b3b7b6624b632eb177e5f4cbcd4e043"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af46fa1e7ad76d756ded89ad76abc6ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af46fa1e7ad76d756ded89ad76abc6ed9">&#9670;&nbsp;</a></span>MIPPARSER_RESET_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIPPARSER_RESET_LENGTH&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a075cc9c325cfac3a1e4e4a34dd19b4ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a075cc9c325cfac3a1e4e4a34dd19b4ad">&#9670;&nbsp;</a></span>mip_parser_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mip_packet_callback mip_parser_callback </td>
          <td>(</td>
          <td class="paramtype">const mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mip_parser_callback </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the packet callback function. </dd></dl>

</div>
</div>
<a id="ab0fe0425fea6c11567676f2153889678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0fe0425fea6c11567676f2153889678">&#9670;&nbsp;</a></span>mip_parser_callback_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* mip_parser_callback_object </td>
          <td>(</td>
          <td class="paramtype">const mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mip_parser_callback </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the packet callback user data pointer. </dd></dl>

</div>
</div>
<a id="abfaadcc441ffcecd290d686dff07261c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfaadcc441ffcecd290d686dff07261c">&#9670;&nbsp;</a></span>mip_parser_get_write_ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mip_parser_get_write_ptr </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **const&#160;</td>
          <td class="paramname"><em>ptr_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain a pointer into which data may be read for processing. </p>
<p>Use this function when the source data stream (e.g. a file or serial port) requires that you pass in a buffer when reading data. This avoids the need for an intermediate buffer.</p>
<p>Call <a class="el" href="mip__parser_8c.html#a2fad65e62d293695a8c8a182b968788c" title="Notify the parser that data has been written to the pointer previously obtained via mip_parser_get_wr...">mip_parser_process_written()</a> after the data has been read to update the buffer count and process any packets.</p>
<div class="fragment"><div class="line">uint8_t ptr;</div>
<div class="line"><span class="keywordtype">size_t</span> space = <a class="code" href="mip__parser_8c.html#abfaadcc441ffcecd290d686dff07261c">mip_parser_get_write_ptr</a>(&amp;parser, &amp;ptr);</div>
<div class="line"><span class="keywordtype">size_t</span> used = fread(ptr, 1, space, file);</div>
<div class="line"><a class="code" href="mip__parser_8c.html#a2fad65e62d293695a8c8a182b968788c">mip_parser_process_written</a>(&amp;parser, used);</div>
<div class="ttc" id="amip__parser_8c_html_a2fad65e62d293695a8c8a182b968788c"><div class="ttname"><a href="mip__parser_8c.html#a2fad65e62d293695a8c8a182b968788c">mip_parser_process_written</a></div><div class="ttdeci">void mip_parser_process_written(mip_parser *parser, size_t count, timestamp_type timestamp, unsigned int max_packets)</div><div class="ttdoc">Notify the parser that data has been written to the pointer previously obtained via mip_parser_get_wr...</div><div class="ttdef"><b>Definition:</b> mip_parser.c:381</div></div>
<div class="ttc" id="amip__parser_8c_html_abfaadcc441ffcecd290d686dff07261c"><div class="ttname"><a href="mip__parser_8c.html#abfaadcc441ffcecd290d686dff07261c">mip_parser_get_write_ptr</a></div><div class="ttdeci">size_t mip_parser_get_write_ptr(mip_parser *parser, uint8_t **const ptr_out)</div><div class="ttdoc">Obtain a pointer into which data may be read for processing.</div><div class="ttdef"><b>Definition:</b> mip_parser.c:362</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
    <tr><td class="paramname">ptr_out</td><td>A pointer to a pointer which will be set to the buffer where data should be written. Cannot be NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>How many bytes can be written to the buffer. Due to the use of a cicular buffer, this may be less than the total available buffer space. Do not write more data than specified. </dd></dl>

</div>
</div>
<a id="a4c335da8f229f06e03af5ff86bba7aa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c335da8f229f06e03af5ff86bba7aa5">&#9670;&nbsp;</a></span>mip_parser_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_parser_init </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mip_packet_callback&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callback_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the MIP parser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
    <tr><td class="paramname">buffer</td><td>Scratch space for the parser to use internally; input data is consumed and fed to this buffer. Cannot be NULL. </td></tr>
    <tr><td class="paramname">buffer_size</td><td>Size of buffer, in bytes. </td></tr>
    <tr><td class="paramname">callback</td><td>A function to be called when a valid packet is identified. It will be passed an optional user-supplied parameter, a pointer to the packet, and the time the first byte was parsed. </td></tr>
    <tr><td class="paramname">callback_object</td><td>An optional user-specified pointer which is directly passed to the callback as the first parameter. </td></tr>
    <tr><td class="paramname">timeout</td><td>The timeout for receiving one packet. Depends on the serial baud rate and is typically 100 milliseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0cd94527b66ef53d6f949c079fecb857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cd94527b66ef53d6f949c079fecb857">&#9670;&nbsp;</a></span>mip_parser_last_packet_timestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">timestamp_type mip_parser_last_packet_timestamp </td>
          <td>(</td>
          <td class="paramtype">const mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the timestamp of the last parsed packet. </p>
<p>This is only valid after a valid packet has been parsed.</p>
<p>This function is provided to allow additional calls to <a class="el" href="mip__parser_8c.html#a40b1a30bddaa52c4814c0a5fd3a6ed07" title="Parses packets from the input data buffer.">mip_parser_parse()</a> with no input data (buffer=NULL and length=0) when max_packets &gt; 0. The additional calls can use the same timestamp because no new data will be processed.</p>
<p>There are two possible situations after the last call to parse:</p><ol type="1">
<li>Either max_packets was reached, meaning at least one packet was parsed, and thus the timestamp is valid, or</li>
<li>More data is required, in which case this time may not be valid, but it won't matter because an additional call to parse won't produce a new packet to be timestamped. </li>
</ol>

</div>
</div>
<a id="a40b1a30bddaa52c4814c0a5fd3a6ed07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40b1a30bddaa52c4814c0a5fd3a6ed07">&#9670;&nbsp;</a></span>mip_parser_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remaining_count mip_parser_parse </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>input_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>input_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>max_packets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses packets from the input data buffer. </p>
<p>For every valid MIP packet, the callback function will be called with the packet and timestamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
    <tr><td class="paramname">input_buffer</td><td>Pointer to bytes received from the device or file. This buffer may contain non-mip data (e.g. NMEA 0183), which will be ignored. This buffer may be NULL if input_count is 0. </td></tr>
    <tr><td class="paramname">input_count</td><td>The number of bytes in the input buffer. </td></tr>
    <tr><td class="paramname">timestamp</td><td>The local time the data was received. This is used to check for timeouts and is passed to the callback as the packet timestamp. </td></tr>
    <tr><td class="paramname">max_packets</td><td>The maximum number of packets to process. Unprocessed data is left in the internal buffer. If 0, processing runs until no complete packets remain in the buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes left unprocessed from the input buffer. If max_packets is 0, this will also be zero as all of the data will be consumed. Data may still remain in the internal buffer.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If max_packets is 0, then this function is guaranteed to consume all of the input data and the buffer can be reused or discarded afterward. However, if max_packets is nonzero (meaning the number of packets parsed will be limited), then this is no longer guaranteed as the excess data may fill up the internal bufffer. In this case, you must process packets faster than they arrive on average. For bursty data (e.g. GNSS data), use a large internal buffer (see mip_parser_init) to help average out the packet processing load.</dd>
<dd>
The timestamp of parsed packets is based on the time the packet was parsed. When max_packets==0, this is the same as the input timestamp. When max_packets!=0, packets received during an earlier parse call may be timestamped with the time from a later parse call. Therefore, if packet timestamping is critical to your application, avoid using max_packets &gt; 0.</dd>
<dd>
The parser will do its best to ignore non-MIP data. However, it is possible for some binary data to appear to be a MIP packet if it conntains 0x75,0x65, has at least 6 bytes, and has a valid checksum. A 16-bit checksum has a 1 in 65,536 chance of appearing to be valid. </dd></dl>

</div>
</div>
<a id="a9fcf1f473e16d5d535a9af7837763fd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fcf1f473e16d5d535a9af7837763fd8">&#9670;&nbsp;</a></span>mip_parser_parse_one_packet_from_ring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mip_parser_parse_one_packet_from_ring </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mip_packet *&#160;</td>
          <td class="paramname"><em>packet_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a single packet from the internal buffer. </p>

</div>
</div>
<a id="a2fad65e62d293695a8c8a182b968788c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fad65e62d293695a8c8a182b968788c">&#9670;&nbsp;</a></span>mip_parser_process_written()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_parser_process_written </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>max_packets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify the parser that data has been written to the pointer previously obtained via <a class="el" href="mip__parser_8c.html#abfaadcc441ffcecd290d686dff07261c" title="Obtain a pointer into which data may be read for processing.">mip_parser_get_write_ptr()</a>. </p>
<p>The write pointer changes after calling this with count &gt; 0. To write more data, call mip_parser_get_write_ptr again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
    <tr><td class="paramname">count</td><td></td></tr>
    <tr><td class="paramname">timestamp</td><td></td></tr>
    <tr><td class="paramname">max_packets</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a398ae890cc4eac40dfcd389cbb2c2390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a398ae890cc4eac40dfcd389cbb2c2390">&#9670;&nbsp;</a></span>mip_parser_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_parser_reset </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the MIP parser. </p>
<p>Clears the current packet and internal buffer. The parser will be restored as if mip_parser_init had just been called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9379c831272ba281cdd79edf395fc1d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9379c831272ba281cdd79edf395fc1d8">&#9670;&nbsp;</a></span>mip_parser_set_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_parser_set_callback </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mip_packet_callback&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callback_object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mip_parser_set_callback </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
    <tr><td class="paramname">callback</td><td></td></tr>
    <tr><td class="paramname">callback_object</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b3177884a72049aac030789a5ecc779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b3177884a72049aac030789a5ecc779">&#9670;&nbsp;</a></span>mip_parser_set_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mip_parser_set_timeout </td>
          <td>(</td>
          <td class="paramtype">mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">timestamp_type&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the timeout of the MIP parser. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td></td></tr>
    <tr><td class="paramname">timeout</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9ba0c15ba99eb98a3de4feaab5333023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ba0c15ba99eb98a3de4feaab5333023">&#9670;&nbsp;</a></span>mip_parser_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">timestamp_type mip_parser_timeout </td>
          <td>(</td>
          <td class="paramtype">const mip_parser *&#160;</td>
          <td class="paramname"><em>parser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the packet timeout of the parser. </p>

</div>
</div>
<a id="a2b3b7b6624b632eb177e5f4cbcd4e043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b3b7b6624b632eb177e5f4cbcd4e043">&#9670;&nbsp;</a></span>mip_timeout_from_baudrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">timeout_type mip_timeout_from_baudrate </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>baudrate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes an appropriate packet timeout for a given serial baud rate. </p>
<dl class="section note"><dt>Note</dt><dd>This function assumes a standard serial port with 10 symbols per byte: 1 start bit, 8 data bits, and 1 stop bit.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baudrate</td><td>Serial baud rate in bits per second</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A timeout value in ms representing the time it would take to transmit a single mip packet of maximum size at the given baud rate, plus some tolerance. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
